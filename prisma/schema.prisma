generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Athlete {
  id              Int               @id @default(autoincrement())
  espnId          Int?
  olympediaId     Int?              @default(0)
  firstName       String?           @db.VarChar(255)
  lastName        String?           @db.VarChar(255)
  nativeName      String?           @db.VarChar(255)
  sport           String            @db.VarChar(3)
  description     String?
  popScore        Int?
  status          String?           @db.VarChar(255)
  heritage        String[]          @db.VarChar(2)
  slug            String            @db.VarChar(255)
  Sport           Sport             @relation(fields: [sport], references: [id])
  FavoriteMoments FavoriteMoments[]
}

model FavoriteMoments {
  id          Int      @id @default(autoincrement())
  createdAt   DateTime @default(now()) @db.Timestamp(6)
  userId      Int?
  athleteId   Int?
  description String?
  url         String?
  Athlete     Athlete? @relation(fields: [athleteId], references: [id])
  User        User?    @relation(fields: [userId], references: [id])
}

model Post {
  id        Int      @id @default(autoincrement())
  title     String   @db.VarChar(255)
  createdAt DateTime @default(now()) @db.Timestamp(6)
  content   String?
  published Boolean  @default(false)
  authorId  Int
  User      User     @relation(fields: [authorId], references: [id])
}

model Profile {
  id     Int     @id @default(autoincrement())
  bio    String?
  userId Int     @unique
  User   User    @relation(fields: [userId], references: [id])
}

model Sport {
  id      String    @id @db.VarChar(3)
  sport   String    @db.VarChar(255)
  gender  String?   @db.VarChar(255)
  olympic Boolean?
  Athlete Athlete[]
}

model User {
  id              Int               @id @default(autoincrement())
  name            String?           @db.VarChar(255)
  email           String            @unique @db.VarChar(255)
  FavoriteMoments FavoriteMoments[]
  Post            Post[]
  Profile         Profile?
}
